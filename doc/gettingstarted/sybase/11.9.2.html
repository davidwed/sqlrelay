<html>

<head>
<title>SQL Relay - Getting Started With Sybase - Initializing an 11.9.2 Server</title>
<link rel="stylesheet" href="../../css/styles.css">
</head>

<body>

<span class="heading1">Initializing an 11.9.2 Server</span><br>


<p>After installing Sybase Adaptive Server Enterprise, you can initialize the 
server by following these steps.</p>

<p>First, <i>su</i> to the sybase user using the -l option.</p>

<blockquote>
<b>su -l sybase</b>
</blockquote>

<p>You should be presented with the a great deal of text and prompted at the
end.</p>

<blockquote>
<b>Do you want to start 'srvbuild' now? [y/n]</b>
</blockquote>

<p>Answer 'y'.  Next time you log in, you won't be prompted.  If you were not
prompted with that text, or if you accidentally answer something other than
'y', you can run the <i>srvbuild</i> command from the command line.</p>

<p>When you run <i>svrbuild</i>, a dialog will appear, prompting you to
<b>Click the check boxes for the types of servers to create and provide names
for these servers.</b></p>

<blockquote>
select <b>Adaptive Server</b><br>
enter a server name, I usually use localhost but any name will do<br>
select <b>OK</b><br>
</blockquote>

<p>A new dialog will appear, prompting you to enter filenames for <b>Master</b>
and <b>Sybsystemprocs</b> device files, and device and database sizes for each.

<blockquote>
enter <i>/opt/sybase-11.9.2/master.dat</i> for the <b>Master</b> device file<br>
enter <i>/opt/sybase-11.9.2/sybsystemprocs.dat</i> for the <b>Sybsystemprocs</b>
device file<br>
Select <b>Edit Advanced Adaptive Server Attributes</b><br>
</blockquote>

<p>A new dialog will appear, prompting you to enter filenames for the
<b>Sybsystemdb</b> device file, size and database sizes.</p>

<blockquote>
enter <i>/opt/sybase-11.9.2/sybsystemdb.dat</i> for the <b>Sybsystemdb</b> 
device file<br>
Select <b>Go Back</b><br>
</blockquote>

<p>This should return you to the previous dialog.</p>

<blockquote>
Select <b>Build Server!</b><br>
</blockquote>

<p>A warning dialog will appear indicating that the files are not raw device
files.  Ignore this warning and select <b>Yes</b> to proceed.</p>

<p>A Status Output dialog will appear.  As the database is built, the dialog 
provides feedback about the process.  When it's done, select <b>OK</b>.</p>

<p>A dialog will appear above the Status Output dialog asking if you would
like to localize your server.  Select <b>No</b> on this dialog and <b>Exit</b> 
on the Status Output dialog.  A final dialog will appear confirming that you 
want to exit.  Select <b>Yes</b>.</p>

<span class="heading2">Starting the Database at Boot Time</span><br>

<p>The RPM distribution of Sybase ASE installs a script in /etc/rc.d/init.d 
which starts the database at boot time.  For non-RPM distributions, you may 
need to install a script like the following.  Replace <i>/opt/sybase-11.9.2</i> 
with whatever directory Sybase ASE is installed in.</p>

<blockquote>
<PRE>
<FONT color=#0000ff>#!/bin/sh</FONT>

<B><FONT color=#a62828>export </FONT></B><FONT color=#008a8e>SYBASE</FONT><B><FONT color=#a62828>=</FONT></B>/opt/sybase<FONT color=#ff00ff>-11</FONT>.<FONT color=#ff00ff>9</FONT>.<FONT color=#ff00ff>2</FONT>

<B><FONT color=#a62828>export </FONT></B><FONT color=#008a8e>PATH</FONT><B><FONT color=#a62828>=</FONT></B><FONT color=#a620f7>$PATH</FONT>:<FONT color=#a620f7>$SYBASE</FONT>/bin:<FONT color=#a620f7>$SYBASE</FONT>/install

<B><FONT color=#a62828>case</FONT></B> &quot;$1&quot; <B><FONT color=#a62828>in</FONT></B>
        start<B><FONT color=#a62828>)</FONT></B>
                <B><FONT color=#a62828>for</FONT></B> i <B><FONT color=#a62828>in</FONT></B> <FONT color=#6959cf>`ls </FONT><FONT color=#a620f7>$SYBASE</FONT><FONT color=#6959cf>/install/RUN_*`</FONT>
                <B><FONT color=#a62828>do</FONT></B>
                        su <B><FONT color=#a62828>-c</FONT></B> <B><FONT color=#a62828>&quot;</FONT></B><FONT color=#ff00ff>startserver -f </FONT><FONT color=#a620f7>$i</FONT><B><FONT color=#a62828>&quot;</FONT></B> sybase <B><FONT color=#a62828>&gt;</FONT></B> /dev/null <B><FONT color=#a62828>2&gt;&amp;1</FONT></B><B><FONT color=#a62828>;</FONT></B>
                <B><FONT color=#a62828>done</FONT></B>
                <B><FONT color=#a62828>;;</FONT></B>
        stop<B><FONT color=#a62828>)</FONT></B>
                <B><FONT color=#a62828>kill</FONT></B> <FONT color=#6959cf>`ps </FONT><FONT color=#6959cf>-efa</FONT><FONT color=#6959cf> </FONT><B><FONT color=#a62828>|</FONT></B><FONT color=#6959cf> grep sybase </FONT><B><FONT color=#a62828>|</FONT></B><FONT color=#6959cf> grep </FONT><FONT color=#6959cf>-v</FONT><FONT color=#6959cf> grep </FONT><B><FONT color=#a62828>|</FONT></B><FONT color=#6959cf> awk </FONT><B><FONT color=#a62828>'</FONT></B><FONT color=#ff00ff>{print $2}</FONT><B><FONT color=#a62828>'</FONT></B><FONT color=#6959cf>`</FONT>
                <B><FONT color=#a62828>;;</FONT></B>
        *<B><FONT color=#a62828>)</FONT></B>
                <B><FONT color=#a62828>echo</FONT></B><FONT color=#ff00ff> $</FONT><B><FONT color=#a62828>&quot;</FONT></B><FONT color=#ff00ff>Usage: </FONT><FONT color=#a620f7>$0</FONT><FONT color=#ff00ff> {start|stop}</FONT><B><FONT color=#a62828>&quot;</FONT></B>
                <B><FONT color=#a62828>exit</FONT></B> <FONT color=#ff00ff>1</FONT>
<B><FONT color=#a62828>esac</FONT></B>

<B><FONT color=#a62828>exit</FONT></B> <FONT color=#ff00ff>0</FONT>
</PRE>
</blockquote>

<p>Install this script and run it with the "start" option to start up the
database.  Running it with the "stop" option shuts the database down.  To
access a database, it must be running.</p>

</body>

</html>
