<html>

<head>
<title>SQL Relay - Getting Started With IBM DB2 - Installing DB2 Version 10.5</title>
<link rel="stylesheet" href="../../css/styles.css">
</head>

<body>

<span class="heading1">Installing IBM DB2 Version 10.5</span><br>

<br><br>

<span class="heading2">DB2 Installation</span><br>

<p>IBM DB2 V10.5 is available from
<a href="http://www-306.ibm.com/software/data/db2/udb/db2express/">
the IBM website</a> as
a tarball.  Extract the tarball using <i>tar xfz</i> and cd into the
exp directory.</p>

<p>Run the db2_install script.</p>

<p>When prompted whether to install to the default directory, type yes and
press return.</p>

<p>When the script completes, DB2 will be installed.</p>

<span class="heading2">Creating an Instance</span><br>

<p>A DB2 installation consists of an administration server and one or more
instances.  Each instance contains one or more databases.  The administration 
server coordinates the instances.  The administration server is owned by an 
OS-level user.  Each instance is owned by a seperate OS-level user as well.</p>

<p>To create an instance and an administration server, change directories into
the installation directory (usually /opt/ibm/db2/V10.5 or /opt/IBM/db2/V10.5)
and run <i>instance/db2isetup</i></p>

<blockquote>
<p>On the screen titled <b>Welcome to the DB2 Instance Setup wizard</b>,
click Next</p>

<p>On the screen titled <b>Select installation, response file creation, or
both</b>, select "Perform instance setup without saving a response file" and
click Next</p>

<p>On the screen titled <b>Set up a DB2 instance</b>,
leave the default radio button checked (Create a DB2 instance)
and click Next</p>

<p>If a screen comes up titled <b>Set user information for the DB2
Administration Server</b> (apparently on some platforms it doesn't), leave the
defaults, enter a password into the Password and Confirm Password text boxes
and click Next</p>

<p>On the screen titled <b>Set user information for the DB2 instance owner</b>,
leave the defaults, enter a password into the Password and Confirm Password
text boxes and click Next</p>

<p>On the screen titled <b>Set user information for the DB2 fenced user</b>,
leave the defaults, enter a password into the Password and Confirm Password
text boxes and click Next</p>

<p>On the screen titled <b>Configure instance communication and startup</b>,
accept the defaults and click Next</p>

<p>On the screen titled <b>Prepare the DB2 tools catalog</b>,
accept the default "Do not prepare the DB2 tools catalog on this computer"
and click Next</p>

<p>On the screen titled <b>Specify a contact for health monitor
notification</b>, check "Defer this task until after installation is complete"
and click Next</pb>

<p>On the screen titled <b>Configure the DB2 Text Search service</b>,
accept the default "Do not configure at this time".  Click Next.</p>

<p>On the screen titled <b>Start copying files</b>, click Finish.</p>

<p>A progress dialog will come up.  When the process is finished, it will
go away.</p>

<p>On the screen titled <b>Setup has completed successfully</b>, click Finish.</p>
</blockquote>

<p>Should you need to create additional DB2 instances, follow this procedure 
again using a different user name and skipping the steps pertaining
to the Administration Server.  The <i>instance/db2ilist</i> command (under the
installation directory) lists all of the DB2 instances on the local
computer.</p>

<p>If you need to drop an instance, go into the installation directory and run 
<i>instance/db2idrop instancename</i>, substituting the name of the instance
you want to drop for instancename.</p>

<p>The <i>instance/daslist</i> command (under the installation directory) lists
all of the DB2 administration servers on the local computer.</p>

<p>If you need to drop an administration server, go into the installation
directory and run <i>instance/dasdrop servername</i>, substituting the name of
the administration server you want to drop for servername.</p>

<span class="heading2">Creating a Sample Database</span><br>

<p>To create a sample database, run the command <i>/opt/ibm/db2/V10.5/bin/db2sampl</i>.</p>

<span class="heading2">Starting the Database at Boot Time</span><br>

<p>You can use the following script to start/stop the database at 
boot/shutdown time.</p>

<blockquote>
<pre>
<font color="#0000ff">#!/bin/sh</font>

<font color="#a52829"><b>case</b></font> <font color="#a52829"><b>&quot;</b></font><font color="#a520f7">$1</font><font color="#a52829"><b>&quot;</b></font> <font color="#a52829"><b>in</b></font>
        start<font color="#a52829"><b>)</b></font>
                chmod <font color="#ff00ff">755</font> /opt/ibm/db2/V10.<font color="#ff00ff">5</font>/adm/db2start
                /opt/ibm/db2/V10.<font color="#ff00ff">5</font>/adm/db2start
        <font color="#a52829"><b>;;</b></font>
        stop<font color="#a52829"><b>)</b></font>
                <font color="#a52829"><b>kill</b></font> <font color="#ff00ff">-9</font> <font color="#6b59ce">`ps -efa </font><font color="#a52829"><b>|</b></font><font color="#6b59ce"> grep db2wdog </font><font color="#a52829"><b>|</b></font><font color="#6b59ce"> grep -v grep </font><font color="#a52829"><b>|</b></font><font color="#6b59ce"> cut -c10</font><font color="#ff00ff">-15</font><font color="#6b59ce">`</font>
        <font color="#a52829"><b>;;</b></font>
        *<font color="#a52829"><b>)</b></font>
        <font color="#a52829"><b>echo</b></font><font color="#ff00ff"> $</font><font color="#a52829"><b>&quot;</b></font><font color="#ff00ff">Usage: </font><font color="#a520f7">$0</font><font color="#ff00ff"> {start|stop}</font><font color="#a52829"><b>&quot;</b></font>
        <font color="#a52829"><b>exit</b></font> <font color="#ff00ff">1</font>
<font color="#a52829"><b>esac</b></font>

<font color="#a52829"><b>exit</b></font> <font color="#ff00ff">0</font>
</pre>
</blockquote>

<p>Be sure to replace all instances of /opt/ibm/db2/V10.5 with your
installation directory.</p>

<p>Install this script and run it with the "start" option to start up the
database.  Running it with the "stop" option shuts the database down.  To
access a database, it must be running.</p>

<p>During instance configuration, there's a check box indicating whether the
instance will be configured to start at boot time.  If you didn't check it, to
get each instance to start at boot time, you need to go into the installation
directory and run the following command as root for each instance.</p>

<blockquote>
<b>instance/db2iauto -on INSTANCE_USER</b>
</blockquote>

<p>Where INSTANCE_USER is replaced by the username of the user associated with
the instance you want to start at boot time.</p>

<p>If you want to disable instances from starting at boot time, you need to
go into the installation directory and run the following command as root for
each instance:</p>

<blockquote>
<b>instance/db2iauto -off INSTANCE_USER</b>
</blockquote>

</body>


</html>
