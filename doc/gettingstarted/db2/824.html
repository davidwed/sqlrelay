<html>

<head>
<title>SQL Relay - Getting Started With IBM DB2 - Installing DB2 Version 8.2.4</title>
<link rel="stylesheet" href="../../css/styles.css">
</head>

<body>

<span class="heading1">Installing IBM DB2 Version 8.2.4</span><br>

<br><br>

<span class="heading2">Install Compatibility Libraries</span><br>

<p>Since DB2's installer is Java-based, it requires libXp.so, which is a
deprecated X11 library.  If you're trying to install DB2 on Fedora Core 5 or
another linux distribution of similar or newer vintage than you'll need to
get that library.  For FC5, you can install the <i>xorg-x11-deprecated-libs</i>
RPM using:</p>

<blockquote><b>
yum install xorg-x11-deprecated-libs
</b></blockquote>

<p>For other rpm based platforms, you may need to find the appropriate RPM on
<a href="http://rpmfind.net">rpmfind</a> and install it using <i>rpm -i</i>.</p>

<span class="heading2">DB2 Installation</span><br>

<p>IBM DB2 V8.2.4 is available from
<a href="http://www-306.ibm.com/software/data/db2/udb/db2express/">
the IBM website</a> as
a tarball.  Extract the tarball using <i>tar xfz</i> and cd into the
db2exc_LNX_26x86 directory.</p>

<p>Run the db2_install script.</p>

<p>When prompted to specify a keyword, type DB2.EXP and press return.</p>

<p>When the script completes, run <i>rpm -qa</i> and verify that the following 
RPM's were installed:</p>

<blockquote><b>
IBM_db2jhen81-8.1.2-105<br>
IBM_db2fs81-8.1.2-105<br>
IBM_db2smpl81-8.1.2-105<br>
IBM_db2conv81-8.1.2-105<br>
IBM_db2adts81-8.1.2-105<br>
IBM_db2crte81-8.1.2-105<br>
IBM_db2cliv81-8.1.2-105<br>
IBM_db2icuc81-8.1.2-105<br>
IBM_db2sp81-8.1.2-105<br>
IBM_db2cj81-8.1.2-105<br>
IBM_db2jdbc81-8.1.2-105<br>
IBM_db2das81-8.1.2-105<br>
IBM_db2cc81-8.1.2-105<br>
IBM_db2ldap81-8.1.2-105<br>
IBM_db2icut81-8.1.2-105<br>
IBM_db2chen81-8.1.2-105<br>
IBM_db2dc81-8.1.2-105<br>
IBM_db2ca81-8.1.2-105<br>
IBM_db2engn81-8.1.2-105<br>
IBM_db2cucs81-8.1.2-105<br>
IBM_db2adt81-8.1.2-105<br>
IBM_db2rte81-8.1.2-105<br>
IBM_db2msen81-8.1.2-105<br>
IBM_db2repl81-8.1.2-105<br>
IBM_db2inst81-8.1.2-105<br>
IBM_db2exsg81-8.1.2-105<br>
</b></blockquote>

<span class="heading2">Ignore the Misinformation</span><br>

<p>There are many, many instances where the DB2 Version 8.2 distribution
identifies itself as version 8.1 instead of 8.2.4.  For example, the RPM's have
a 8.1.2 version number.  These clues might lead one to think that he or she has
accidentally installed version 8.1 instead of version 8.2.4, but this is not the
case.</p>

<span class="heading2">Java Installation</span><br>

<p>IBM DB2 V8.2.4 requires IBM's java.  Failure to install the IBM java
distribution that comes with the DB2 distribution will cause the installation
of the tools catalog to fail.  Change directories to db2/linux26/Java-1.4
and rum the following command:</p>

<blockquote><b>
rpm -i IBMJava2-SDK-1.4.2-1.0.i386.rpm
</b></blockquote>

<span class="heading2">Creating an Instance</span><br>

<p>A DB2 installation consists of an administration server and one or more
instances.  Each instance contains one or more databases.  The administration 
server coordinates the instances.  The administration server is owned by an 
OS-level user.  Each instance is owned by a seperate OS-level user as well.</p>

<p>To create an instance and an administration server, run 
<i>/opt/IBM/db2/V8.1/instance/db2isetup</i>, a java-based installation
program.</p>

<blockquote>
<p>On the screen titled <b>Welcome to the DB2 Instance Setup wizard</b>,
click Next</p>

<p>On the screen titled <b>Set user information for the DB2 Administration
Server</b>,
leave the defaults, enter a password into the Password and Confirm Password
text boxes and click Next</p>

<p>On the screen titled <b>Set up a DB2 instance</b>,
leave the default radio button checked (Create a DB2 instance)
and click Next</p>

<p>On the screen titled <b>Set user information for the DB2 instance owner</b>,
leave the defaults, enter a password into the Password and Confirm Password
text boxes and click Next</p>

<p>On the screen titled <b>Set user information for the DB2 fenced user</b>,
leave the defaults, enter a password into the Password and Confirm Password
text boxes and click Next</p>

<p>On the screen titled <b>Configure DB2 instance TCP/IP communication</b>,
leave the default radio button checked (Configure),
leave the default Service name and Port number and click Next</p>

<p>On the screen titled <b>Set instance properties</b>,
leave the default Authentication type pulldown (Server),
leave the default Startup box checked
(Autostart the instance at system startup) and click Next</p>

<p>On the screen titled <b>Prepare the DB2 tools catalog</b>,
accept the default "Do not prepare the DB2 tools catalog on this computer"
and click Next</p>

<p>On the screen titled <b>Set up the administration contact list</b>,
leave the defaults and click Next.  (You may have to check and then uncheck the  "Enable notification" button before Next is enabled)</p>

<p>A dialog will come up with a warning about not being able to send
notifications until the smtp server has been specified. Click OK.</p>

<p>On the screen titled <b>Specify a contact for health monitor
notification</b>, enter your Name and Email address and click Next.</p>

<p>On the screen titled <b>Set up Informix data source support</b>,
click the check box next to "Defer this task until after installation is
complete" and click Next.</p>

<p>On the screen titled <b>Start copying files</b>, click Finish.</p>

<p>A progress dialog will come up.  When the process is finished, it will
go away.</p>

<p>On the screen titled <b>Setup is complete</b>, click Finish.</p>
</blockquote>

<p>Should you need to create additional DB2 instances, follow this procedure 
again using a different user name and skipping the steps pertaining
to the Administration Server.  The <i>/opt/IBM/db2/V8.1/instance/db2ilist</i> 
command lists all of the DB2 instances on the local computer.</p>

<p>If you need to drop an instance, run 
<i>/opt/IBM/db2/V8.1/instance/db2idrop instancename</i>, substituting the name
of the instance you want to drop for instancename.</p>

<p>The <i>/opt/IBM/db2/V8.1/instance/daslist</i> command lists all of the DB2 
administration servers on the local computer.</p>

<p>If you need to drop an administration server, run 
<i>/opt/IBM/db2/V8.1/instance/dasdrop servername</i>, substituting the name of
the administration server you want to drop for servername.</p>

<span class="heading2">Creating a Sample Database</span><br>

<p>To create a sample database, run the command <i>/opt/IBM/db2/V8.1/bin/db2sampl</i>.</p>

<span class="heading2">Starting the Database at Boot Time</span><br>

<p>You can use the following script to start/stop the database at 
boot/shutdown time.</p>

<blockquote>
<pre>
<font color="#0000ff">#!/bin/sh</font>

<font color="#a52829"><b>case</b></font> <font color="#a52829"><b>&quot;</b></font><font color="#a520f7">$1</font><font color="#a52829"><b>&quot;</b></font> <font color="#a52829"><b>in</b></font>
        start<font color="#a52829"><b>)</b></font>
                /opt/IBM/db2/V8.<font color="#ff00ff">1</font>/instance/db2istrt
        <font color="#a52829"><b>;;</b></font>
        stop<font color="#a52829"><b>)</b></font>
                <font color="#a52829"><b>kill</b></font> <font color="#ff00ff">-9</font> <font color="#6b59ce">`ps -efa </font><font color="#a52829"><b>|</b></font><font color="#6b59ce"> grep db2wdog </font><font color="#a52829"><b>|</b></font><font color="#6b59ce"> grep -v grep </font><font color="#a52829"><b>|</b></font><font color="#6b59ce"> cut -c10</font><font color="#ff00ff">-15</font><font color="#6b59ce">`</font>
        <font color="#a52829"><b>;;</b></font>
        *<font color="#a52829"><b>)</b></font>
        <font color="#a52829"><b>echo</b></font><font color="#ff00ff"> $</font><font color="#a52829"><b>&quot;</b></font><font color="#ff00ff">Usage: </font><font color="#a520f7">$0</font><font color="#ff00ff"> {start|stop}</font><font color="#a52829"><b>&quot;</b></font>
        <font color="#a52829"><b>exit</b></font> <font color="#ff00ff">1</font>
<font color="#a52829"><b>esac</b></font>

<font color="#a52829"><b>exit</b></font> <font color="#ff00ff">0</font>
</pre>
</blockquote>

<p>Install this script and run it with the "start" option to start up the
database.  Running it with the "stop" option shuts the database down.  To
access a database, it must be running.</p>

<p>During instance configuration, there's a check box indicating whether the
instance will be configured to start at boot time.  If you didn't check it, to
get each instance to start at boot time, you need to run the following command
as root for each instance.</p>

<blockquote>
<b>/opt/IBM/db2/V8.1/instance/db2iauto -on INSTANCE_USER</b>
</blockquote>

<p>Where INSTANCE_USER is replaced by the username of the user associated with
the instance you want to start at boot time.</p>

<p>If you want to disable instances from starting at boot time, you need to
run the following command as root for each instance:</p>

<blockquote>
<b>/opt/IBM/db2/V8.1/instance/db2iauto -off INSTANCE_USER</b>
</blockquote>

</body>

</html>
