<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Cursor</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#author">AUTHOR</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<pre>
    SQLRelay::Cursor - Perl API for SQL Relay</pre>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<pre>
        use SQLRelay::Connection;
        use SQLRelay::Cursor;</pre>
<pre>
        my $sc=SQLRelay::Connection-&gt;new(&quot;testhost&quot;,9000,&quot;&quot;,
                                          &quot;testuser&quot;,&quot;testpassword&quot;,0,1);
        my $ss=SQLRelay::Cursor-&gt;new($sc);</pre>
<pre>
        $ss-&gt;sendQuery(&quot;select table_name from user_tables&quot;);
        $sc-&gt;endSession();</pre>
<pre>
        for (my $i=0; $i&lt;$ss-&gt;rowCount(); $i++) {
                print $ss-&gt;getField($i,&quot;table_name&quot;), &quot;\n&quot;;
        }</pre>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<pre>
    SQLRelay::Cursor</pre>
<pre>
        new(sqlrclient);</pre>
<pre>
        DESTROY();</pre>
<pre>
        setResultSetBufferSize(rows);
            # Sets the number of rows of the result set
            # to buffer at a time.  0 (the default)
            # means buffer the entire result set.</pre>
<pre>
        getResultSetBufferSize();
            # Returns the number of result set rows that 
            # will be buffered at a time or 0 for the
            # entire result set.</pre>
<pre>
        dontGetColumnInfo();
            # Tells the server not to send any column
            # info (names, types, sizes).  If you don't
            # need that info, you should call this
            # method to improve performance.</pre>
<pre>
        getColumnInfo();
            # Tells the server to send column info.</pre>
<pre>
        mixedCaseColumnNames();
            # Columns names are returned in the same
            # case as they are defined in the database.
            # This is the default.</pre>
<pre>
        upperCaseColumnNames();
            # Columns names are converted to upper case.</pre>
<pre>
        lowerCaseColumnNames();
            # Columns names are converted to lower case.</pre>
<pre>
        cacheToFile(char *filename);
            # Sets query caching on.  Future queries
            # will be cached to the file &quot;filename&quot;.
            #
            # A default time-to-live of 10 minutes is
            # also set.
            #
            # Note that once cacheToFile() is called,
            # the result sets of all future queries will
            # be cached to that file until another call 
            # to cacheToFile() changes which file to
            # cache to or a call to cacheOff() turns off
            # caching.</pre>
<pre>
        setCacheTtl(int ttl);
            # Sets the time-to-live for cached result
            # sets. The sqlr-cachemanger will remove each 
            # cached result set &quot;ttl&quot; seconds after it's 
            # created, provided it's scanning the directory
            # containing the cache files.</pre>
<pre>
        getCacheFileName();
            # Returns the name of the file containing the
            # cached result set.</pre>
<pre>
        cacheOff();
            # Sets query caching off.</pre>
<pre>
        # If you don't need to use substitution or bind variables
        # in your queries, use these two methods.
        sendQuery(query);
            # Sends &quot;query&quot; and gets a result set.</pre>
<pre>
        sendQueryWithLength(query,length);
            # Sends &quot;query&quot; with length &quot;length&quot; and gets
            # a result set. This method must be used if
            # the query contains binary data.</pre>
<pre>
        sendFileQuery(path,filename);
            # Sends the query in file &quot;path&quot;/&quot;filename&quot; 
            # and gets a result set.</pre>
<pre>
        # If you need to use substitution or bind variables, in your
        # queries use the following methods.  See the API documentation
        # for more information about substitution and bind variables.
        prepareQuery(query);
            # Prepare to execute &quot;query&quot;.</pre>
<pre>
        prepareQueryWithLength(query,length);
            # Prepare to execute &quot;query&quot; with length 
            # &quot;length&quot;.  This method must be used if the
            # query contains binary data.</pre>
<pre>
        prepareFileQuery(path,filename);
            # Prepare to execute the contents 
            # of &quot;path&quot;/&quot;filename&quot;.</pre>
<pre>
        substitution(variable,value);
            # Define a substitution variable.</pre>
<pre>
        clearBinds();
            # Clear all bind variables.</pre>
<pre>
        countBindVariables();
            # Parses the previously prepared query,
            # counts the number of bind variables defined
            # in it and returns that number.</pre>
<pre>
        inputBind(variable,value);
        inputBindBlob(variable,value,size);
        inputBindClob(variable,value,size);
            # Define an input bind variable.</pre>
<pre>
        defineOutputBindString(variable,bufferlength);
            # Define an output bind variable.
            # &quot;bufferlength&quot; bytes will be reserved to store the value.
        defineOutputBindBlob(variable);
            # Define a BLOB output bind variable.
        defineOutputBindClob(variable);
            # Define a CLOB output bind variable.
        defineOutputBindCursor(variable);
            # Define a cursor output bind variable.</pre>
<pre>
        substitutions(variables,values);
            # Define an array of substitution variables.</pre>
<pre>
        inputBinds(variables,values);
            # Define an array of input bind variables.</pre>
<pre>
        validateBinds();
            # If you are binding to any variables that 
            # might not actually be in your query, call 
            # this to ensure that the database won't try 
            # to bind them unless they really are in the 
            # query.</pre>
<pre>
        validBind(variable);
            # Returns true if &quot;variable&quot; was a valid
            # bind variable of the query.</pre>
<pre>
        executeQuery();
            # Execute the query that was previously 
            # prepared and bound.</pre>
<pre>
        fetchFromBindCursor();
            # Fetch from a cursor that was returned as
            # an output bind variable.</pre>
<pre>
        getOutputBindString(variable);
            # Get the value stored in a previously
            # defined output bind variable.</pre>
<pre>
        getOutputBindBlob(variable);
            # Get the value stored in a previously
            # defined output bind variable.</pre>
<pre>
        getOutputBindClob(variable);
            # Get the value stored in a previously
            # defined output bind variable.</pre>
<pre>
        getOutputBindLength(variable);
            # Get the length of the value stored in a
            # previously defined output bind variable.</pre>
<pre>
        getOutputBindCursor(variable);
            # Get the cursor associated with a previously
            # defined output bind variable.</pre>
<pre>
        openCachedResultSet(filename);
            # Opens a cached result set as if a query that
            # would have generated it had been executed.
            # Returns true on success and false on failure.</pre>
<pre>
        colCount();
            # Returns the number of columns in the current
            # result set.</pre>
<pre>
        rowCount();
            # Returns the number of rows in the current 
            # result set.</pre>
<pre>
        totalRows();
            # Returns the total number of rows that will 
            # be returned in the result set.  Not all 
            # databases support this call.  Don't use it 
            # for applications which are designed to be 
            # portable across databases.  -1 is returned
            # by databases which don't support this option.</pre>
<pre>
        affectedRows();
            # Returns the number of rows that were 
            # updated, inserted or deleted by the query.
            # Not all databases support this call.  Don't 
            # use it for applications which are designed 
            # to be portable across databases.  -1 is 
            # returned by databases which don't support 
            # this option.</pre>
<pre>
        firstRowIndex();
            # Returns the index of the first buffered row.
            # This is useful when bufferning only part of the
            # result set at a time.</pre>
<pre>
        endOfResultSet();
            # Returns false if part of the result set is still
            # pending on the server and true if not.  This
            # method can only return false if 
            # setResultSetBufferSize() has been called
            # with a parameter other than 0.</pre>
<pre>
        errorMessage();
            # If a query failed and generated an error, the
            # error message is available here.  If the 
            # query succeeded then this method returns a 
            # NULL.</pre>
<pre>
        getNullsAsEmptyStrings();
            # Tells the client to return NULL fields and 
            # output bind variables as empty strings.
            # This is the default.</pre>
<pre>
        getNullsAsUndefined();
            # Tells the client to return NULL fields and 
            # output bind variables as undefined.</pre>
<pre>
        getField(row, col);
            # Returns a pointer to the value of the 
            # specified row and column.</pre>
<pre>
        getFieldLength(row, col);
            # Returns a the length of the 
            # specified row and column.</pre>
<pre>
        getRow(row);
            # Returns an array of the values of the
            # specified row or an empty list if the
            # requested row is past the end of the
            # result set.</pre>
<pre>
        getRowHash(row);
            # Returns the requested row as values in a
            # hash with column names for keys or an
            # empty list if the requested row is past
            # the end of the result set.</pre>
<pre>
        getRowLengths(row);
            # Returns a null terminated array of the 
            # lengths of the specified row or an empty
            # list if the requested row is past the end
            # of the result set.</pre>
<pre>
        getRowLengthsHash(row);
            # Returns the requested row lengths as values 
            # in a hash with column names for keys or an
            # empty list if the requested row is past
            # the end of the result set.</pre>
<pre>
        getColumnNames();
            # Returns a null terminated array of the 
            # column names of the current result set.</pre>
<pre>
        getColumnName(col);
            # Returns the name of the specified column.</pre>
<pre>
        getColumnType(col);
            # Returns the type of the specified column.</pre>
<pre>
        getColumnLength(col);
            # Returns the length of the specified column.</pre>
<pre>
        getColumnPrecision(col);
            # Returns the precision of the specified
            # column.
            # Precision is the total number of digits in
            # a number.  eg: 123.45 has a precision of 5.
            # For non-numeric types, it's the number of
            # characters in the string.</pre>
<pre>
        getColumnScale(col);
            # Returns the scale of the specified column.
            # Scale is the total number of digits to the
            # right of the decimal point in a number.
            # eg: 123.45 has a scale of 2.</pre>
<pre>
        getColumnIsNullable(col);
            # Returns 1 if the specified column can
            # contain nulls and 0 otherwise.</pre>
<pre>
        getColumnIsPrimaryKey(col);
            # Returns 1 if the specified column is a
            # primary key and 0 otherwise.</pre>
<pre>
        getColumnIsUnique(col);
            # Returns 1 if the specified column is
            # unique and 0 otherwise.</pre>
<pre>
        getColumnIsPartOfKey(col);
            # Returns 1 if the specified column is
            # part of a composite key and 0 otherwise.</pre>
<pre>
        getColumnIsUnsigned(col);
            # Returns 1 if the specified column is
            # an unsigned number and 0 otherwise.</pre>
<pre>
        getColumnIsZeroFilled(col);
            # Returns 1 if the specified column was
            # created with the zero-fill flag and 0
            # otherwise.</pre>
<pre>
        getColumnIsBinary(col);
            # Returns 1 if the specified column
            # contains binary data and 0
            # otherwise.</pre>
<pre>
        getColumnIsAutoIncrement(col);
            # Returns 1 if the specified column
            # auto-increments and 0 otherwise.</pre>
<pre>
        getLongest(col);
            # Returns the length of the longest field
            # in the specified column.</pre>
<pre>
        suspendResultSet();
            # Tells the server to leave this result
            # set open when the client calls 
            # suspendSession() so that another client can 
            # connect to it using resumeResultSet() after 
            # it calls resumeSession().</pre>
<pre>
        getResultSetId();
            # Returns the internal ID of this result set.
            # This parameter may be passed to another 
            # statement for use in the resumeResultSet() 
            # method.
            # Note: the value returned by this method is
            # only valid after a call to suspendResultSet().</pre>
<pre>
        resumeResultSet(int id);
            # Resumes a result set previously left open 
            # using suspendSession().
            # Returns true on success and false on failure.</pre>
<pre>
        resumeCachedResultSet(int id, char *filename);
            # Resumes a result set previously left open
            # using suspendSession() and continues caching
            # the result set to &quot;filename&quot;.
            # Returns true on success and false on failure.</pre>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<pre>
    David Muse
    david.muse@firstworks.com</pre>

</body>

</html>
