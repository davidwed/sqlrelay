<HTML>
<HEAD>
<TITLE>SQLRCursor</TITLE>
<LINK REV="made" HREF="mailto:bhcompile@daffy.perf.redhat.com">
</HEAD>

<BODY>

<A NAME="__index__"></A>
<!-- INDEX BEGIN -->

<UL>

	<LI><A HREF="#name">NAME</A></LI>
	<LI><A HREF="#synopsis">SYNOPSIS</A></LI>
	<LI><A HREF="#description">DESCRIPTION</A></LI>
	<LI><A HREF="#author">AUTHOR</A></LI>
</UL>
<!-- INDEX END -->

<HR>
<P>
<H1><A NAME="name">NAME</A></H1>
<PRE>
    Firstworks::SQLRCursor - Perl API for SQL Relay</PRE>
<P>
<HR>
<H1><A NAME="synopsis">SYNOPSIS</A></H1>
<PRE>
        use Firstworks::SQLRConnection;
        use Firstworks::SQLRCursor;</PRE>
<PRE>
        my $sc=Firstworks::SQLRConnection-&gt;new(&quot;testhost&quot;,9000,&quot;&quot;,
                                          &quot;testuser&quot;,&quot;testpassword&quot;,0,1);
        my $ss=Firstworks::SQLRCursor-&gt;new($sc);</PRE>
<PRE>
        $ss-&gt;sendQuery(&quot;select table_name from user_tables&quot;);
        $sc-&gt;endSession();</PRE>
<PRE>
        for (my $i=0; $i&lt;$ss-&gt;rowCount(); $i++) {
                print $ss-&gt;getField($i,&quot;table_name&quot;), &quot;\n&quot;;
        }</PRE>
<P>
<HR>
<H1><A NAME="description">DESCRIPTION</A></H1>
<PRE>
    Firstworks::SQLRCursor</PRE>
<PRE>
        new(sqlrclient);</PRE>
<PRE>
        DESTROY();</PRE>
<PRE>
        setResultSetBufferSize(rows);
            # Sets the number of rows of the result set
            # to buffer at a time.  0 (the default)
            # means buffer the entire result set.</PRE>
<PRE>
        getResultSetBufferSize();
            # Returns the number of result set rows that 
            # will be buffered at a time or 0 for the
            # entire result set.</PRE>
<PRE>
        dontGetColumnInfo();
            # Tells the server not to send any column
            # info (names, types, sizes).  If you don't
            # need that info, you should call this
            # method to improve performance.</PRE>
<PRE>
        getColumnInfo();
            # Tells the server to send column info.</PRE>
<PRE>
        mixedCaseColumnNames();
            # Columns names are returned in the same
            # case as they are defined in the database.
            # This is the default.</PRE>
<PRE>
        upperCaseColumnNames();
            # Columns names are converted to upper case.</PRE>
<PRE>
        lowerCaseColumnNames();
            # Columns names are converted to lower case.</PRE>
<PRE>
        cacheToFile(char *filename);
            # Sets query caching on.  Future queries
            # will be cached to the file &quot;filename&quot;.
            #
            # A default time-to-live of 10 minutes is
            # also set.
            #
            # Note that once cacheToFile() is called,
            # the result sets of all future queries will
            # be cached to that file until another call 
            # to cacheToFile() changes which file to
            # cache to or a call to cacheOff() turns off
            # caching.</PRE>
<PRE>
        setCacheTtl(int ttl);
            # Sets the time-to-live for cached result
            # sets. The sqlr-cachemanger will remove each 
            # cached result set &quot;ttl&quot; seconds after it's 
            # created, provided it's scanning the directory
            # containing the cache files.</PRE>
<PRE>
        getCacheFileName();
            # Returns the name of the file containing the
            # cached result set.</PRE>
<PRE>
        cacheOff();
            # Sets query caching off.</PRE>
<PRE>
        # If you don't need to use substitution or bind variables
        # in your queries, use these two methods.
        sendQuery(query);
            # Sends &quot;query&quot; and gets a result set.</PRE>
<PRE>
        sendQueryWithLength(query,length);
            # Sends &quot;query&quot; with length &quot;length&quot; and gets
            # a result set. This method must be used if
            # the query contains binary data.</PRE>
<PRE>
        sendFileQuery(path,filename);
            # Sends the query in file &quot;path&quot;/&quot;filename&quot; 
            # and gets a result set.</PRE>
<PRE>
        # If you need to use substitution or bind variables, in your
        # queries use the following methods.  See the API documentation
        # for more information about substitution and bind variables.
        prepareQuery(query);
            # Prepare to execute &quot;query&quot;.</PRE>
<PRE>
        prepareQueryWithLength(query,length);
            # Prepare to execute &quot;query&quot; with length 
            # &quot;length&quot;.  This method must be used if the
            # query contains binary data.</PRE>
<PRE>
        prepareFileQuery(path,filename);
            # Prepare to execute the contents 
            # of &quot;path&quot;/&quot;filename&quot;.</PRE>
<PRE>
        substitution(variable,value);
            # Define a substitution variable.</PRE>
<PRE>
        clearBinds();
            # Clear all bind variables.</PRE>
<PRE>
        inputBind(variable,value);
        inputBindBlob(variable,value,size);
        inputBindClob(variable,value,size);
            # Define an input bind variable.</PRE>
<PRE>
        defineOutputBind(variable,bufferlength);
            # Define an output bind variable.
            # &quot;bufferlength&quot; bytes will be reserved to store the value.
        defineOutputBindBlob(variable);
            # Define a BLOB output bind variable.
        defineOutputBindClob(variable);
            # Define a CLOB output bind variable.
        defineOutputBindCursor(variable);
            # Define a cursor output bind variable.</PRE>
<PRE>
        substitutions(variables,values);
            # Define an array of substitution variables.</PRE>
<PRE>
        inputBinds(variables,values);
            # Define an array of input bind variables.</PRE>
<PRE>
        validateBinds();
            # If you are binding to any variables that 
            # might not actually be in your query, call 
            # this to ensure that the database won't try 
            # to bind them unless they really are in the 
            # query.</PRE>
<PRE>
        executeQuery();
            # Execute the query that was previously 
            # prepared and bound.</PRE>
<PRE>
        fetchFromBindCursor();
            # Fetch from a cursor that was returned as
            # an output bind variable.</PRE>
<PRE>
        getOutputBind(variable);
            # Get the value stored in a previously
            # defined output bind variable.</PRE>
<PRE>
        getOutputBindLength(variable);
            # Get the length of the value stored in a
            # previously defined output bind variable.</PRE>
<PRE>
        getOutputBindCursor(variable);
            # Get the cursor associated with a previously
            # defined output bind variable.</PRE>
<PRE>
        openCachedResultSet(filename);
            # Opens a cached result set as if a query that
            # would have generated it had been executed.
            # Returns 1 on success and 0 on failure.</PRE>
<PRE>
        colCount();
            # Returns the number of columns in the current
            # result set.</PRE>
<PRE>
        rowCount();
            # Returns the number of rows in the current 
            # result set.</PRE>
<PRE>
        totalRows();
            # Returns the total number of rows that will 
            # be returned in the result set.  Not all 
            # databases support this call.  Don't use it 
            # for applications which are designed to be 
            # portable across databases.  -1 is returned
            # by databases which don't support this option.</PRE>
<PRE>
        affectedRows();
            # Returns the number of rows that were 
            # updated, inserted or deleted by the query.
            # Not all databases support this call.  Don't 
            # use it for applications which are designed 
            # to be portable across databases.  -1 is 
            # returned by databases which don't support 
            # this option.</PRE>
<PRE>
        firstRowIndex();
            # Returns the index of the first buffered row.
            # This is useful when bufferning only part of the
            # result set at a time.</PRE>
<PRE>
        endOfResultSet();
            # Returns 0 if part of the result set is still
            # pending on the server and 1 if not.  This
            # method can only return 0 if 
            # setResultSetBufferSize() has been called
            # with a parameter other than 0.</PRE>
<PRE>
        errorMessage();
            # If a query failed and generated an error, the
            # error message is available here.  If the 
            # query succeeded then this method returns a 
            # NULL.</PRE>
<PRE>
        getNullsAsEmptyStrings();
            # Tells the client to return NULL fields and 
            # output bind variables as empty strings.
            # This is the default.</PRE>
<PRE>
        getNullsAsUndefined();
            # Tells the client to return NULL fields and 
            # output bind variables as undefined.</PRE>
<PRE>
        getField(row, col);
            # Returns a pointer to the value of the 
            # specified row and column.</PRE>
<PRE>
        getFieldLength(row, col);
            # Returns a the length of the 
            # specified row and column.</PRE>
<PRE>
        getRow(row);
            # Returns a null terminated array of the 
            # values of the specified row.</PRE>
<PRE>
        getRowHash(row);
            # Returns the requested row as values in a
            # hash with column names for keys.</PRE>
<PRE>
        getRowLengths(row);
            # Returns a null terminated array of the 
            # lengths of the specified row.</PRE>
<PRE>
        getRowLengthsHash(row);
            # Returns the requested row lengths as values 
            # in a hash with column names for keys.</PRE>
<PRE>
        getColumnNames();
            # Returns a null terminated array of the 
            # column names of the current result set.</PRE>
<PRE>
        getColumnName(col);
            # Returns the name of the specified column.</PRE>
<PRE>
        getColumnType(col);
            # Returns the type of the specified column.</PRE>
<PRE>
        getColumnLength(col);
            # Returns the length of the specified column.</PRE>
<PRE>
        getLongest(col);
            # Returns the length of the longest field
            # in the specified column.</PRE>
<PRE>
        getResultSetId();
            # Returns the internal ID of this result set.
            # This parameter may be passed to another 
            # statement for use in the resumeResultSet() 
            # method.</PRE>
<PRE>
        suspendResultSet();
            # Tells the server to leave this result
            # set open when the client calls 
            # suspendSession() so that another client can 
            # connect to it using resumeResultSet() after 
            # it calls resumeSession().</PRE>
<PRE>
        resumeResultSet(int id);
            # Resumes a result set previously left open 
            # using suspendSession().
            # Returns 1 on success and 0 on failure.</PRE>
<PRE>
        resumeCachedResultSet(int id, char *filename);
            # Resumes a result set previously left open
            # using suspendSession() and continues caching
            # the result set to &quot;filename&quot;.
            # Returns 1 on success and 0 on failure.</PRE>
<P>
<HR>
<H1><A NAME="author">AUTHOR</A></H1>
<PRE>
    David Muse
    mused@firstworks.com</PRE>

</BODY>

</HTML>
