<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Connection</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<pre><code>    SQLRelay::Connection - Perl API for SQL Relay</code></pre>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code>        use SQLRelay::Connection;
        use SQLRelay::Cursor;

        my $sc=SQLRelay::Connection-&gt;new(&quot;testhost&quot;,9000,&quot;&quot;,
                                          &quot;testuser&quot;,&quot;testpassword&quot;,0,1);
        my $ss=SQLRelay::Cursor-&gt;new($sc);

        $ss-&gt;sendQuery(&quot;select table_name from user_tables&quot;);
        $sc-&gt;endSession();

        for (my $i=0; $i&lt;$ss-&gt;rowCount(); $i++) {
                print $ss-&gt;getField($i,&quot;table_name&quot;), &quot;\n&quot;;
        }</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<pre><code>    SQLRelay::Connection

        new(server, port, socket, user, password, retrytime, tries);
            # Initiates a connection to &quot;server&quot; on &quot;port&quot;
            # or to the unix &quot;socket&quot; on the local machine
            # and auths with &quot;user&quot; and &quot;password&quot;.
            # Failed connections will be retried for 
            # &quot;tries&quot; times, waiting &quot;retrytime&quot; seconds between each
            # try.  If &quot;tries&quot; is 0 then retries will continue forever.
            # If &quot;retrytime&quot; is 0 then retries will be attempted on
            # a default interval.
            #
            # If the &quot;socket&quot; parameter is neither
            # NULL nor &quot;&quot; then an attempt will be made to
            # connect through it before attempting to
            # connect to &quot;server&quot; on &quot;port&quot;.  If it is
            # NULL or &quot;&quot; then no attempt will be made to
            # connect through the socket.

        DESTROY();
            # Disconnects and ends the session if
            # it hasn&#39;t been ended already.

        setConnectTimeout(timeoutsec, timeoutusec);
            # Sets the server connect timeout in seconds and
            # milliseconds.  Setting either parameter to -1 disables the
            # timeout.  You can also set this timeout using the
            # SQLR_CLIENT_CONNECT_TIMEOUT environment variable.

        setAuthenticationTimeout(timeoutsec, timeoutusec);
            # Sets the authentication timeout in seconds and
            # milliseconds.  Setting either parameter to -1 disables the
            # timeout.   You can also set this timeout using the
            # SQLR_CLIENT_AUTHENTICATION_TIMEOUT environment variable. */

        setResponseTimeout(timeoutsec, timeoutusec);
            # Sets the response timeout (for queries, commits, rollbacks,
            # pings, etc.) in seconds and milliseconds.  Setting either
            # parameter to -1 disables the timeout.  You can also set
            # this timeout using the SQLR_CLIENT_RESPONSE_TIMEOUT
            # environment variable.

        endSession();
            # Ends the session.

        suspendSession();
            # Leaves the session open so another client
            # can connect to it.
            
        getConnectionPort();
            # Returns the inet port that the client is 
            # communicating over. This parameter may be 
            # passed to another client for use in
            # the resumeSession() command below.
            # Note: the value returned by this method is
            # only valid after a call to suspendSession().

        getConnectionSocket();
            # Returns the unix socket that the client is 
            # communicating over. This parameter may be 
            # passed to another client for use in
            # the resumeSession() command below.
            # Note: the value returned by this method is
            # only valid after a call to suspendSession().

        resumeSession(port,socket);
            # Resumes a session previously left open 
            # using suspendSession().
            # Returns true on success and false on failure.


        ping();
            # Returns true if the database is up and false
            # if it&#39;s down.

        identify();
            # Returns the type of database:
            #   oracle, postgresql, mysql, etc.

        dbVersion();
            # Returns the version of the database

        dbHostName();
            # Returns the host name of the database

        dbIpAddress();
            # Returns the ip address of the database

        serverVersion();
            # Returns the version of the SQL Relay server software

        clientVersion();
            # Returns the version of the SQL Relay client software

        bindFormat();
            # Returns a string representing the format
            # of the bind variables used in the db.


        selectDatabase(database);
            # Sets the current database/schema to &quot;database&quot;
        getCurrentDatabase();
            # Returns the database/schema that is currently in use.

        getLastInsertId();
            # Returns the value of the autoincrement
            # column for the last insert

        autoCommitOn();
            # Instructs the database to perform a commit
            # after every successful query.
            # Returns true if setting autocommit on succeeded
            # and false if it failed.

        autoCommitOff();
            # Instructs the database to wait for the 
            # client to tell it when to commit.
            # Returns true if setting autocommit off succeeded
            # and false if it failed.

        begin();
            # Begins a transaction.  Returns true if the begin
            # succeeded, false if it failed.  If the database
            # automatically begins a new transaction when a
            # commit or rollback is issued then this doesn&#39;t
            # do anything unless SQL Relay is faking transaction
            # blocks.

        commit();
            # Issues a commit.  Returns true if the commit
            # succeeded, false if it failed.

        rollback();
            # Issues a rollback.  Returns true if the rollback
            # succeeded, false if it failed.


        errorMessage();
            # If an operation failed and generated an error, the
            # error message is available here.  If there is no
            # error then this method returns NULL.

        errorNumber();
            # If an operation failed and generated an
            # error, the error number is available here.
            # If there is no error then this method 
            # returns 0.


        debugOn();
            # Causes verbose debugging information to be 
            # sent to standard output.  Another way to do 
            # this is to start a query with &quot;-- debug\n&quot;.
            # Yet another way is to set the environment
            # variable SQLR_CLIENT_DEBUG to &quot;ON&quot;

        debugOff();
            # Turns debugging off.

        getDebug();
            # Returns true if debugging is currently on and false
            # if debugging is currently off.

        setDebugFile(filename);
            # Allows you to specify a file to write debug to.
            # Setting &quot;filename&quot; to NULL or an empty string causes debug
            # to be written to standard output (the default).

        setClientInfo(clientinfo);
            # Allows you to set a string that will be passed to the
            # server and ultimately included in server-side logging
            # along with queries that were run by this instance of
            # the client.

        getClientInfo();
            # Returns the string that was set by setClientInfo().</code></pre>

<h1 id="AUTHOR">AUTHOR</h1>

<pre><code>    David Muse
    david.muse@firstworks.com</code></pre>


</body>

</html>


