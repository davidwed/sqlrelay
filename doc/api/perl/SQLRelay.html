<HTML>
<HEAD>
<TITLE>SQLRelay</TITLE>
<LINK REV="made" HREF="mailto:bhcompile@daffy.perf.redhat.com">
</HEAD>

<BODY>

<A NAME="__index__"></A>
<!-- INDEX BEGIN -->

<UL>

	<LI><A HREF="#name">NAME</A></LI>
	<LI><A HREF="#synopsis">SYNOPSIS</A></LI>
	<LI><A HREF="#description">DESCRIPTION</A></LI>
	<LI><A HREF="#author">AUTHOR</A></LI>
	<LI><A HREF="#see also">SEE ALSO</A></LI>
</UL>
<!-- INDEX END -->

<HR>
<P>
<H1><A NAME="name">NAME</A></H1>
<P>DBD::SQLRelay - perl DBI driver for SQL Relay</P>
<P>
<HR>
<H1><A NAME="synopsis">SYNOPSIS</A></H1>
<P>use DBD::SQLRelay;</P>
<P>my $dbh = DBI -&gt; connect ('dbi:SQLRelay:$dsn', $login, $password);</P>
<P>
<HR>
<H1><A NAME="description">DESCRIPTION</A></H1>
<P>This module is a pure-Perl DBI binding to SQL Relay's native API. 
Connection string consists of following parts:</P>
<DL>
<DT><STRONG><A NAME="item_host%3D%2E%2E%2E_default%3A_localhost_%2D%2D%2D_ho"><STRONG>host=...</STRONG>      default: <EM>localhost</EM> --- hostname of SQL Relay server;</A></STRONG><BR>
<DD>
<DT><STRONG><A NAME="item_port%3D%2E%2E%2E_default%3A_9000_%2D%2D%2D_port_nu"><STRONG>port=...</STRONG>      default: <EM>9000</EM>      --- port number that SQL Relay server listens on;</A></STRONG><BR>
<DD>
<DT><STRONG><A NAME="item_tries%3D%2E%2E%2E_default%3A_1_%2D%2D%2D_how_much_"><STRONG>tries=...</STRONG>     default: <EM>1</EM>         --- how much times do we try to connect;</A></STRONG><BR>
<DD>
<DT><STRONG><A NAME="item_time"><STRONG>retrytime=...</STRONG> default: <EM>0</EM>         --- time (in seconds) between connect attempts;</A></STRONG><BR>
<DD>
<DT><STRONG><A NAME="item_debug%3D%2E%2E%2E_default%3A_0_%2D%2D%2D_set_it_to"><STRONG>debug=...</STRONG>     default: <EM>0</EM>         --- set it to 1 if you want to get some debug messages in stdout;</A></STRONG><BR>
<DD>
Once connected, DB handler works as usual (see <EM>DBI</EM>).
<P>Don't ever try to share one SQLRelay connect by multiple scripts, for example, if you use 
Apache mod_perl. Every $dbh holds one of server connections, so call <CODE>disconnect()</CODE> directly
at the end of every script and don't use Apache::DBI or SQLRelay will be deadlocked.</P>
<P>If you use <A HREF="/HTML/Mason.html">the HTML::Mason manpage</A>, your handler.pl sould look like this:</P>
<PRE>
  ...</PRE>
<PRE>
     {
       package HTML::Mason::Commands;
       use DBI;
       use vars qw($db);  
     }
</PRE>
<PRE>

  ...</PRE>
<PRE>
     sub handler {
</PRE>
<PRE>

       $HTML::Mason::Commands::dbh = DBI -&gt; connect (...);</PRE>
<PRE>

       my $status = $ah -&gt; handle_request (...);</PRE>
<PRE>

       $HTML::Mason::Commands::dbh -&gt; disconnect;</PRE>
<PRE>

       return $status;</PRE>
<PRE>

     }</PRE>
<P></P></DL>
<P>
<HR>
<H1><A NAME="author">AUTHOR</A></H1>
<P>D. E. Ovsyanko, <A HREF="mailto:do@mobile.ru">do@mobile.ru</A></P>
<P>
<HR>
<H1><A NAME="see also">SEE ALSO</A></H1>
<P><A HREF="http://www.firstworks.com">http://www.firstworks.com</A></P>

</BODY>

</HTML>
