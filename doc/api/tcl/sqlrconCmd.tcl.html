<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!-- Generated by TclDoc 0.3 -->
<html>
<head><title>sqlrconCmd.tcl</title></head>
<body bgcolor="#ffffff">
<font size="-2">
Index by:  <a href="index_main.html#sqlrconCmd.tcl">file name</a> |
<a href="index_main.html#byprocname">procedure name</a> |
<a href="index_main.html#bycall">procedure call</a> |
<a href="index_annot_full.html">annotation</a>
</font>
<hr>
<strong>sqlrconCmd.tcl</strong>
(<a href="sqlrconCmd.tcl-annot.html">annotations</a> | <a href="sqlrconCmd.tcl.txt">original source</a>)
<p>
<pre>
<font color="#208020"># Copyright (c) 2003 Takeshi Taguchi</font>
<font color="#208020"># See the file COPYING for more information</font>

<font color="#208020"># Initiates a connection to &#34;server&#34; on &#34;port&#34;</font>
<font color="#208020"># or to the unix &#34;socket&#34; on the local machine</font>
<font color="#208020"># and authenticates with &#34;user&#34; and &#34;password&#34;.</font>
<font color="#208020"># Failed connections will be retried for </font>
<font color="#208020"># &#34;tries&#34; times, waiting &#34;retrytime&#34; seconds</font>
<font color="#208020"># between each try.  If &#34;tries&#34; is 0 then retries</font>
<font color="#208020"># will continue forever.  If &#34;retrytime&#34; is 0 then</font>
<font color="#208020"># retries will be attempted on a default interval.</font>
<font color="#208020">#</font>
<font color="#208020"># If the &#34;socket&#34; parameter is neither </font>
<font color="#208020"># NULL nor &#34;&#34; then an attempt will be made to </font>
<font color="#208020"># connect through it before attempting to </font>
<font color="#208020"># connect to &#34;server&#34; on &#34;port&#34;.  If it is </font>
<font color="#208020"># NULL or &#34;&#34; then no attempt will be made to </font>
<font color="#208020"># connect through the socket.</font>
<strong><a name="sqlrconCmd_19">proc <a href="sqlrconCmd.tcl-annot.html#sqlrconCmd">sqlrconCmd</a></a></strong><a name="sqlrconCmd"></a> {server port socket user password retrytime tries} 


<font color="#208020"># Disconnects and ends the session if</font>
<font color="#208020"># it hasn't been ended already.</font>
<strong><a name="sqlrconDelete_24">proc <a href="sqlrconCmd.tcl-annot.html#sqlrconDelete">sqlrconDelete</a></a></strong><a name="sqlrconDelete"></a> {} 



<font color="#208020"># Sets the server connect timeout in seconds and</font>
<font color="#208020"># milliseconds.  Setting either parameter to -1 disables the</font>
<font color="#208020"># timeout.  You can also set this timeout using the</font>
<font color="#208020"># SQLR_CLIENT_CONNECT_TIMEOUT environment variable.</font>
<strong><a name="setConnectTimeout_32">proc <a href="sqlrconCmd.tcl-annot.html#setConnectTimeout">setConnectTimeout</a></a></strong><a name="setConnectTimeout"></a> {timeoutsec timeoutusec} 

<font color="#208020"># Sets the authentication timeout in seconds and</font>
<font color="#208020"># milliseconds.  Setting either parameter to -1 disables the</font>
<font color="#208020"># timeout.   You can also set this timeout using the</font>
<font color="#208020"># SQLR_CLIENT_AUTHENTICATION_TIMEOUT environment variable.</font>
<strong><a name="setAuthenticationTimeout_38">proc <a href="sqlrconCmd.tcl-annot.html#setAuthenticationTimeout">setAuthenticationTimeout</a></a></strong><a name="setAuthenticationTimeout"></a> {timeoutsec timeoutusec} 

<font color="#208020"># Sets the response timeout (for queries, commits, rollbacks,</font>
<font color="#208020"># pings, etc.) in seconds and milliseconds.  Setting either</font>
<font color="#208020"># parameter to -1 disables the timeout.  You can also set</font>
<font color="#208020"># this timeout using the SQLR_CLIENT_RESPONSE_TIMEOUT</font>
<font color="#208020"># environment variable.</font>
<strong><a name="setResponseTimeout_45">proc <a href="sqlrconCmd.tcl-annot.html#setResponseTimeout">setResponseTimeout</a></a></strong><a name="setResponseTimeout"></a> {timeoutsec timeoutusec} 



<font color="#208020"># Enables Kerberos authentication and encryption.</font>
<font color="#208020">#</font>
<font color="#208020"># &#34;service&#34; indicates the Kerberos service name of the</font>
<font color="#208020"># SQL Relay server.  If left empty or NULL then the service</font>
<font color="#208020"># name &#34;sqlrelay&#34; will be used. &#34;sqlrelay&#34; is the default</font>
<font color="#208020"># service name of the SQL Relay server.  Note that on Windows</font>
<font color="#208020"># platforms the service name must be fully qualified,</font>
<font color="#208020"># including the host and realm name.  For example:</font>
<font color="#208020"># &#34;sqlrelay/sqlrserver.firstworks.com@AD.FIRSTWORKS.COM&#34;.</font>
<font color="#208020">#</font>
<font color="#208020"># &#34;mech&#34; indicates the specific Kerberos mechanism to use.</font>
<font color="#208020"># On Linux/Unix platforms, this should be a string</font>
<font color="#208020"># representation of the mechnaism's OID, such as:</font>
<font color="#208020">#     { 1 2 840 113554 1 2 2 }</font>
<font color="#208020"># On Windows platforms, this should be a string like:</font>
<font color="#208020">#     Kerberos</font>
<font color="#208020"># If left empty or NULL then the default mechanism will be</font>
<font color="#208020"># used.  Only set this if you know that you have a good</font>
<font color="#208020"># reason to.</font>
<font color="#208020">#</font>
<font color="#208020"># &#34;flags&#34; indicates what Kerberos flags to use.  Multiple</font>
<font color="#208020"># flags may be specified, separated by commas.  If left</font>
<font color="#208020"># empty or NULL then a defalt set of flags will be used.</font>
<font color="#208020"># Only set this if you know that you have a good reason to.</font>
<font color="#208020">#</font>
<font color="#208020"># Valid flags include:</font>
<font color="#208020">#  * GSS_C_MUTUAL_FLAG</font>
<font color="#208020">#  * GSS_C_REPLAY_FLAG</font>
<font color="#208020">#  * GSS_C_SEQUENCE_FLAG</font>
<font color="#208020">#  * GSS_C_CONF_FLAG</font>
<font color="#208020">#  * GSS_C_INTEG_FLAG</font>
<font color="#208020">#</font>
<font color="#208020"># For a full list of flags, consult the GSSAPI documentation,</font>
<font color="#208020"># though note that only the flags listed above are supported</font>
<font color="#208020"># on Windows. */</font>
<strong><a name="enableKerberos_84">proc <a href="sqlrconCmd.tcl-annot.html#enableKerberos">enableKerberos</a></a></strong><a name="enableKerberos"></a> {service mech flags}

<font color="#208020"># Enables TLS/SSL encryption, and optionally authentication.</font>
<font color="#208020">#</font>
<font color="#208020"># &#34;version&#34; specifies the TLS/SSL protocol version that the</font>
<font color="#208020"># client will attempt to use.  Valid values include SSL2,</font>
<font color="#208020"># SSL3, TLS1, TLS1.1, TLS1.2 or any more recent version of</font>
<font color="#208020"># TLS, as supported by and enabled in the underlying TLS/SSL</font>
<font color="#208020"># library.  If left blank or empty then the highest supported</font>
<font color="#208020"># version will be negotiated.</font>
<font color="#208020">#</font>
<font color="#208020"># &#34;cert&#34; is the file name of the certificate chain file to</font>
<font color="#208020"># send to the SQL Relay server.  This is only necessary if</font>
<font color="#208020"># the SQL Relay server is configured to authenticate and</font>
<font color="#208020"># authorize clients by certificate.</font>
<font color="#208020">#</font>
<font color="#208020"># If &#34;cert&#34; contains a password-protected private key, then</font>
<font color="#208020"># &#34;password&#34; may be supplied to access it.  If the private</font>
<font color="#208020"># key is not password-protected, then this argument is</font>
<font color="#208020"># ignored, and may be left empty or NULL.</font>
<font color="#208020">#</font>
<font color="#208020"># &#34;ciphers&#34; is a list of ciphers to allow.  Ciphers may be</font>
<font color="#208020"># separated by spaces, commas, or colons.  If &#34;ciphers&#34; is</font>
<font color="#208020"># empty or NULL then a default set is used.  Only set this if</font>
<font color="#208020"># you know that you have a good reason to.</font>
<font color="#208020">#</font>
<font color="#208020"># For a list of valid ciphers on Linux/Unix platforms, see:</font>
<font color="#208020">#     man ciphers</font>
<font color="#208020">#</font>
<font color="#208020"># For a list of valid ciphers on Windows platforms, see:</font>
<font color="#208020">#     https://msdn.microsoft.com/en-us/library/windows/desktop/aa375549%28v=vs.85%29.aspx</font>
<font color="#208020"># On Windows platforms, the ciphers (alg_id's) should omit</font>
<font color="#208020"># CALG_ and may be given with underscores or dashes.</font>
<font color="#208020"># For example: 3DES_112</font>
<font color="#208020">#</font>
<font color="#208020"># &#34;validate&#34; indicates whether to validate the SQL Relay's</font>
<font color="#208020"># server certificate, and may be set to one of the following:</font>
<font color="#208020">#     &#34;no&#34; - Don't validate the server's certificate.</font>
<font color="#208020">#     &#34;ca&#34; - Validate that the server's certificate was</font>
<font color="#208020">#            signed by a trusted certificate authority.</font>
<font color="#208020">#     &#34;ca+host&#34; - Perform &#34;ca&#34; validation and also validate</font>
<font color="#208020">#            that one of the subject altenate names (or the</font>
<font color="#208020">#            common name if no SANs are present) in the</font>
<font color="#208020">#            certificate matches the host parameter.</font>
<font color="#208020">#            (Falls back to &#34;ca&#34; validation when a unix</font>
<font color="#208020">#            socket is used.)</font>
<font color="#208020">#     &#34;ca+domain&#34; - Perform &#34;ca&#34; validation and also validate</font>
<font color="#208020">#            that the domain name of one of the subject</font>
<font color="#208020">#            alternate names (or the common name if no SANs</font>
<font color="#208020">#            are present) in the certificate matches the</font>
<font color="#208020">#            domain name of the host parameter.  (Falls back</font>
<font color="#208020">#            to &#34;ca&#34; validation when a unix socket is used.)</font>
<font color="#208020">#</font>
<font color="#208020"># &#34;ca&#34; is the location of a certificate authority file to</font>
<font color="#208020"># use, in addition to the system's root certificates, when</font>
<font color="#208020"># validating the SQL Relay server's certificate.  This is</font>
<font color="#208020"># useful if the SQL Relay server's certificate is self-signed.</font>
<font color="#208020">#</font>
<font color="#208020"># On Windows, &#34;ca&#34; must be a file name.</font>
<font color="#208020">#</font>
<font color="#208020"># On non-Windows systems, &#34;ca&#34; can be either a file or</font>
<font color="#208020"># directory name.  If it is a directory name, then all</font>
<font color="#208020"># certificate authority files found in that directory will be</font>
<font color="#208020"># used.  If it a file name, then only that file will be used.</font>
<font color="#208020">#</font>
<font color="#208020">#</font>
<font color="#208020"># Note that the supported &#34;cert&#34; and &#34;ca&#34; file formats may</font>
<font color="#208020"># vary between platforms.  A variety of file formats are</font>
<font color="#208020"># generally supported on Linux/Unix platfoms (.pem, .pfx,</font>
<font color="#208020"># etc.) but only the .pfx format is currently supported on</font>
<font color="#208020"># Windows. */</font>
<strong><a name="enableTls_155">proc <a href="sqlrconCmd.tcl-annot.html#enableTls">enableTls</a></a></strong><a name="enableTls"></a> {version cert password ciphers validate ca depth}

<font color="#208020"># Disables encryption.</font>
<strong><a name="disableEncryption_158">proc <a href="sqlrconCmd.tcl-annot.html#disableEncryption">disableEncryption</a></a></strong><a name="disableEncryption"></a> {}



<font color="#208020"># Ends the session.</font>
<strong><a name="endSession_163">proc <a href="sqlrconCmd.tcl-annot.html#endSession">endSession</a></a></strong><a name="endSession"></a> {} 

<font color="#208020"># Disconnects this connection from the current</font>
<font color="#208020"># session but leaves the session open so </font>
<font color="#208020"># that another connection can connect to it </font>
<font color="#208020"># using resumeSession {}.</font>
<strong><a name="suspendSession_169">proc <a href="sqlrconCmd.tcl-annot.html#suspendSession">suspendSession</a></a></strong><a name="suspendSession"></a> {} 

<font color="#208020"># Returns the inet port that the connection is </font>
<font color="#208020"># communicating over. This parameter may be </font>
<font color="#208020"># passed to another connection for use in</font>
<font color="#208020"># the resumeSession {} method.</font>
<font color="#208020"># Note: The value this method returns is only</font>
<font color="#208020"># valid after a call to suspendSession {}.</font>
<strong><a name="getConnectionPort_177">proc <a href="sqlrconCmd.tcl-annot.html#getConnectionPort">getConnectionPort</a></a></strong><a name="getConnectionPort"></a> {} 

<font color="#208020"># Returns the unix socket that the connection </font>
<font color="#208020"># is communicating over. This parameter may be </font>
<font color="#208020"># passed to another connection for use in</font>
<font color="#208020"># the resumeSession {} method.</font>
<font color="#208020"># Note: The value this method returns is only</font>
<font color="#208020"># valid after a call to suspendSession {}.</font>
<strong><a name="getConnectionSocket_185">proc <a href="sqlrconCmd.tcl-annot.html#getConnectionSocket">getConnectionSocket</a></a></strong><a name="getConnectionSocket"></a> {} 

<font color="#208020"># Resumes a session previously left open </font>
<font color="#208020"># using suspendSession {}.</font>
<font color="#208020"># Returns true on success and false on failure.</font>
<strong><a name="resumeSession_190">proc <a href="sqlrconCmd.tcl-annot.html#resumeSession">resumeSession</a></a></strong><a name="resumeSession"></a> {port socket} 



<font color="#208020"># Returns true if the database is up and false</font>
<font color="#208020"># if it's down.</font>
<strong><a name="ping_196">proc <a href="sqlrconCmd.tcl-annot.html#ping">ping</a></a></strong><a name="ping"></a> {} 

<font color="#208020"># Returns the type of database: </font>
<font color="#208020"># oracle postgresql mysql etc.</font>
<strong><a name="identify_200">proc <a href="sqlrconCmd.tcl-annot.html#identify">identify</a></a></strong><a name="identify"></a> {} 

<font color="#208020"># Returns the version of the database</font>
<strong><a name="dbVersion_203">proc <a href="sqlrconCmd.tcl-annot.html#dbVersion">dbVersion</a></a></strong><a name="dbVersion"></a> {} 

<font color="#208020"># Returns the host name of the database</font>
<strong><a name="dbHostName_206">proc <a href="sqlrconCmd.tcl-annot.html#dbHostName">dbHostName</a></a></strong><a name="dbHostName"></a> {} 

<font color="#208020"># Returns the ip address of the database</font>
<strong><a name="dbIpAddress_209">proc <a href="sqlrconCmd.tcl-annot.html#dbIpAddress">dbIpAddress</a></a></strong><a name="dbIpAddress"></a> {} 

<font color="#208020"># Returns the version of the sqlrelay server software.</font>
<strong><a name="serverVersion_212">proc <a href="sqlrconCmd.tcl-annot.html#serverVersion">serverVersion</a></a></strong><a name="serverVersion"></a> {} 

<font color="#208020"># Returns the version of the sqlrelay client software.</font>
<strong><a name="clientVersion_215">proc <a href="sqlrconCmd.tcl-annot.html#clientVersion">clientVersion</a></a></strong><a name="clientVersion"></a> {} 

<font color="#208020"># Returns a string representing the format</font>
<font color="#208020"># of the bind variables used in the db.</font>
<strong><a name="bindFormat_219">proc <a href="sqlrconCmd.tcl-annot.html#bindFormat">bindFormat</a></a></strong><a name="bindFormat"></a> {} 



<font color="#208020"># Sets the current database/schema to &#34;database&#34;</font>
<strong><a name="selectDatabase_224">proc <a href="sqlrconCmd.tcl-annot.html#selectDatabase">selectDatabase</a></a></strong><a name="selectDatabase"></a> {database} 

<font color="#208020"># Returns the database/schema that is currently in use.</font>
<strong><a name="getCurrentDatabase_227">proc <a href="sqlrconCmd.tcl-annot.html#getCurrentDatabase">getCurrentDatabase</a></a></strong><a name="getCurrentDatabase"></a> {} 



<font color="#208020"># Returns the value of the autoincrement</font>
<font color="#208020"># column for the last insert</font>
<strong><a name="getLastInsertId_233">proc <a href="sqlrconCmd.tcl-annot.html#getLastInsertId">getLastInsertId</a></a></strong><a name="getLastInsertId"></a> {} 



<font color="#208020"># Instructs the database to perform a commit</font>
<font color="#208020"># after every successful query.</font>
<strong><a name="autoCommitOn_239">proc <a href="sqlrconCmd.tcl-annot.html#autoCommitOn">autoCommitOn</a></a></strong><a name="autoCommitOn"></a> {} 

<font color="#208020"># Instructs the database to wait for the </font>
<font color="#208020"># client to tell it when to commit.</font>
<strong><a name="autoCommitOff_243">proc <a href="sqlrconCmd.tcl-annot.html#autoCommitOff">autoCommitOff</a></a></strong><a name="autoCommitOff"></a> {} 



<font color="#208020"># Begins a transaction.  Returns true if the begin</font>
<font color="#208020"># succeeded, false if it failed.  If the database</font>
<font color="#208020"># automatically begins a new transaction when a</font>
<font color="#208020"># commit or rollback is issued then this doesn't</font>
<font color="#208020"># do anything unless SQL Relay is faking transaction</font>
<font color="#208020"># blocks.</font>
<strong><a name="begin_253">proc <a href="sqlrconCmd.tcl-annot.html#begin">begin</a></a></strong><a name="begin"></a> {} 

<font color="#208020"># Issues a commit.  Returns true if the commit</font>
<font color="#208020"># succeeded false if it failed.</font>
<strong><a name="commit_257">proc <a href="sqlrconCmd.tcl-annot.html#commit">commit</a></a></strong><a name="commit"></a> {} 

<font color="#208020"># Issues a rollback.  Returns true if the rollback</font>
<font color="#208020"># succeeded false if it failed.</font>
<strong><a name="rollback_261">proc <a href="sqlrconCmd.tcl-annot.html#rollback">rollback</a></a></strong><a name="rollback"></a> {} 



<font color="#208020"># If an operation failed and generated an</font>
<font color="#208020"># error the error message is available here.</font>
<font color="#208020"># If there is no error then this method </font>
<font color="#208020"># returns NULL.</font>
<strong><a name="errorMessage_269">proc <a href="sqlrconCmd.tcl-annot.html#errorMessage">errorMessage</a></a></strong><a name="errorMessage"></a> {} 



<font color="#208020"># If an operation failed and generated an</font>
<font color="#208020"># error, the error number is available here.</font>
<font color="#208020"># If there is no error then this method </font>
<font color="#208020"># returns 0.</font>
<strong><a name="errorNumber_277">proc <a href="sqlrconCmd.tcl-annot.html#errorNumber">errorNumber</a></a></strong><a name="errorNumber"></a> {}



<font color="#208020"># Causes verbose debugging information to be </font>
<font color="#208020"># sent to standard output.  Another way to do</font>
<font color="#208020"># this is to start a query with &#34;-- debug\n&#34;.</font>
<font color="#208020"># Another way is to set the environment variable</font>
<font color="#208020"># SQLR_CLIENT_DEBUG to &#34;ON&#34;</font>
<strong><a name="debugOn_286">proc <a href="sqlrconCmd.tcl-annot.html#debugOn">debugOn</a></a></strong><a name="debugOn"></a> {} 

<font color="#208020"># Turns debugging off.</font>
<strong><a name="debugOff_289">proc <a href="sqlrconCmd.tcl-annot.html#debugOff">debugOff</a></a></strong><a name="debugOff"></a> {} 

<font color="#208020"># Returns false if debugging is off and true</font>
<font color="#208020"># if debugging is on.</font>
<strong><a name="getDebug_293">proc <a href="sqlrconCmd.tcl-annot.html#getDebug">getDebug</a></a></strong><a name="getDebug"></a> {} 

<font color="#208020"># Allows you to specify a file to write debug to.</font>
<font color="#208020"># Setting &#34;debugfilename&#34; to NULL or an empty string causes debug</font>
<font color="#208020"># to be written to standard output (the default).</font>
<strong><a name="setDebugFile_298">proc <a href="sqlrconCmd.tcl-annot.html#setDebugFile">setDebugFile</a></a></strong><a name="setDebugFile"></a> {debugfilename}

<font color="#208020"># Allows you to set a string that will be passed to the</font>
<font color="#208020"># server and ultimately included in server-side logging</font>
<font color="#208020"># along with queries that were run by this instance of</font>
<font color="#208020"># the client.</font>
<strong><a name="setClientInfo_304">proc <a href="sqlrconCmd.tcl-annot.html#setClientInfo">setClientInfo</a></a></strong><a name="setClientInfo"></a> {clientinfo} 

<font color="#208020"># Returns the string that was set by setClientInfo().</font>
<strong><a name="getClientInfo_307">proc <a href="sqlrconCmd.tcl-annot.html#getClientInfo">getClientInfo</a></a></strong><a name="getClientInfo"></a> {} 
</pre>
<hr>
<font size="-2">
Index by:  <a href="index_main.html#byfilename">file name</a> |
<a href="index_main.html#byprocname">procedure name</a> |
<a href="index_main.html#bycall">procedure call</a> |
<a href="index_annot_full.html">annotation</a><br>
<cite>File generated 2016-03-15 at 02:51.</cite>
</font>
</body>
</html>
