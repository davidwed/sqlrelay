<html>
<head>
	<title>Logger Modules</title>
	<link rel="stylesheet" href="../css/styles.css">
</head>
<body>
<h1>Logger Modules</h1>

<ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#available">Available Modules</a></li>
  <li><a href="#custom">Custom Modules</a></li>
</ul>

<hr/>

<a name="introduction"/><h2>Introduction</h2>

<p>Logger modules allow the SQL Relay server programs to log various bits of information as they run.  A section of the sqlrelay.conf file indicates which modules to load and what parameters to use when logging.</p>

<p>For example, to use the <i>debug</i> module, which logs detailed information for debugging purposes, you would include a section in the sqlrelay.conf file like:</p>

<blockquote>
</blockquote>
<p>The <i>module</i> attribute specifies which module to load.  The <i>listener</i> and <i>connection</i> attributes are parameters for the module.</p>

<p>Different modules may have different parameters.  In this case, listener="yes" tells the module to log debug info for the sqlr-listener processes and connection="yes" tells the module to log debug info for the sqlr-connection processes.</p>

<p>Currently, all log modules have an <i>enabled</i> parameter, allowing the module to be temporarily disabled.  If enabled="no" is configured, then the module is disabled.  If set to any other value, or omitted, then the module is enabled.</p>

<p>Multiple log modules may be loaded by specifying multiple logger tags.</p>

<p>Internally, at startup the SQL Relay server processes create instances of the specified logger modules and initialize them.  Then, as they run, the call the logger modules' "run" method, passing in an event type, log level and log message.  The modules then react to the different events, log levels and messages in a module-specific manner.  The "debug" logger module, for example, logs every event type at every log level, while the "slowqueries" logger module only logs queries and ignores all other event types.</p>

<p><br><a name="available"></a>
<span class="heading2">Available Modules</span><br></p>

<p>Currently, the following standard logger modules are available:</p>

<p><b>
<ul>
<li>debug</li>
<li>slowqueries</li>
</ul>
</b></p>

<p><span class="heading3">debug</span><br></p>

<p>The <b>debug</b> module logs a great deal of information to about the internal operation of the SQL Relay server to log files in the "debug directory", usually /usr/local/firstworks/var/sqlrelay/debug.  It creates files named sqlr-listener."pid" and sqlr-connection."pid" where "pid" is replaced with the process id of the process that is being logged.  As new processes are forked, new files are created with debug information about those processes.</p>

<p>This module takes three parameters: <b>listener</b>, <b>connection</b> and <b>perms</b>.  The <b>listener</b> parameter may be set to "no" to disable logging of the sqlr-listener processes.  The <b>connection</b> parameter may be set to "no" to disable logging of the sqlr-connection processes.  Logging is enabled if either parameter is omitted or set to any other value.  The <b>perms</b> parameter may be set to any ls -l style permissions string.  The default is "rw-------" which translates to read/write for owner only.</p>

<p>The general log format is:</p>

</body>
</html>
