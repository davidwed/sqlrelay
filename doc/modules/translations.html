<html>
<head>
	<title>Query Translation Modules</title>
	<link rel="stylesheet" href="../css/styles.css">
</head>
<body>
<h1>Query Translation Modules</h1>

<ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#available">Available Modules</a></li>
  <li><a href="#custom">Custom Modules</a></li>
</ul>

<hr/>

<a name="introduction"/><h2>Introduction</h2>

<p>Query Translation modules allow the SQL Relay server programs to alter queries before passing them to the database.</p>

<p>The <i>translations</i> section of the sqlrelay.conf file indicates which translation modules to load and what parameters to use when executing them.</p>

<blockquote>
</blockquote>
<p>The <i>module</i> attribute specifies which module to load.</p>

<p>Module configurations may have attributes and/or nested tags.  How these elements are interpreted is module-specific.</p>

<p>Currently, all translation modules have an <i>enabled</i> parameter, allowing the module to be temporarily disabled.  If enabled="no" is configured, then the module is disabled.  If set to any other value, or omitted, then the module is enabled.</p>

<p>Translation modules can be "stacked".  Multiple modules may be loaded and multiple instances of the same type of module, with different configurations, may also be loaded.</p>

<blockquote>
</blockquote>
<p>At startup, the SQL Relay server creates instances of the specified translations modules and initializes them.  When a query is run, the server passes the query to each module, in the order that they were specified in the config file.  If a module modifies the query, then that modified query is passed on to the next module.</p>

<a name="available"/><h2>Available Modules</h2>

<p>Currently, the following translation module is available:</p>

<ul>
  <li><b>normalize</b></li>
</ul>

<h3>normalize</h3>

<p>The normalize module performs the following operations on a query:</p>

<ul>
  <li>Removes comments.</li>
  <li>Converts all white-space characters to spaces, outside of quoted strings.</li>
  <li>Converts multiple spaces into a single space, outside of quoted strings.</li>
  <li>Removes whitespace from around operators.</li>
  <li>Converts everything to lower case, outside of quoted strings.</li>
  <li>Converts static concatenations to equivalent strings.  Eg. converts 'he' {{{#!td
 'll' 
</li>
</ul>

</body>
</html>
