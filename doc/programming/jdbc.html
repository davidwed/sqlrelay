<html>
<head>
<title>firstworks   Programming with SQL Relay using JDBC</title>
<link href="../css/styles.css" rel="stylesheet">
</head>
<body>

<span class="heading1">Programming with SQL Relay using JDBC</span><br><br>

<p>The SQL Relay distribution does not provide a native JBCD driver, but by using the ODBC-to-JDBC bridge provided by most Java distributions, applications which use JDBC on Unix or Linux may access databases through SQL Relay via the ODBC driver.</p>

<p>This is not currently supported on Windows.</p>

<p>See <a href="odbc.html">Programming with SQL Relay using ODBC</a> for instructions detailing how to access SQL Relay through ODBC.  Once that is working, you can access databases through SQL Relay via JDBC as well.</p>

<p>A good program to test this with is <a href="http://henplus.sourceforge.net/">HenPlus</a>, a JDBC command line client.  After downloading and installing HenPlus, you can run it as follows:</p>

<blockquote>
<b>henplus jdbc:odbc:sqlrtest</b>
</blockquote>

<p>When you run it, you might get an error like:</p>

<blockquote>
/usr/java/jdk1.7.0_10/bin/java: symbol lookup error: /usr/java/jdk1.7.0_10/jre/lib/i386/libJdbcOdbc.so: undefined symbol: SQLAllocEnv
</blockquote>

<p>If so, this is because the JDBC-ODBC library wasn't linked properly, a common problem.  It can be fixed by preloading the ODBC driver manager library as follows:</p>

<blockquote>
export LD_PRELOAD=/usr/lib/libodbc.so
</blockquote>

<p>(Replacing /usr/lib with the path to libodbc.so on your system)</p>

<p>Here is a sample henplus session:</p>

<blockquote>
<font face="monospace">
[dmuse@fedora bin]$ ./henplus jdbc:odbc:sqlrtest<br>
no readline found (no JavaReadline&nbsp;<font color="#a52a2a"><b>in</b></font>&nbsp;java.library.path).&nbsp;<font color="#6a5acd">Using</font>&nbsp;simple stdin.<br>
<font color="#6a5acd">using</font>&nbsp;GNU readline (Brian Fox, Chet Ramey), Java wrapper&nbsp;<font color="#6a5acd">by</font>&nbsp;Bernhard Bablok<br>
henplus config at /home/dmuse/.henplus<br>
<font color="#0000ff">----------------------------------------------------------------------------</font><br>
&nbsp;HenPlus II&nbsp;<font color="#ff00ff">0.9</font>.<font color="#ff00ff">8</font>&nbsp;<font color="#ff00ff">&quot;Yay Labor Day&quot;</font><br>
&nbsp;Copyright(C)&nbsp;<font color="#ff00ff">1997</font>..<font color="#ff00ff">2009</font>&nbsp;Henner Zeller &lt;H.Zeller@acm.org&gt;<br>
&nbsp;HenPlus&nbsp;<font color="#6a5acd">is</font>&nbsp;provided&nbsp;<font color="#6a5acd">AS</font>&nbsp;<font color="#6a5acd">IS</font>&nbsp;<font color="#a52a2a"><b>and</b></font>&nbsp;comes&nbsp;<font color="#6a5acd">with</font>&nbsp;ABSOLUTELY NO WARRANTY<br>
&nbsp;This&nbsp;<font color="#6a5acd">is</font>&nbsp;free software,&nbsp;<font color="#a52a2a"><b>and</b></font>&nbsp;you are welcome&nbsp;<font color="#6a5acd">to</font>&nbsp;redistribute it under the<br>
&nbsp;conditions&nbsp;<font color="#6a5acd">of</font>&nbsp;the GNU&nbsp;<font color="#6a5acd">Public</font>&nbsp;License &lt;<a href="http://www.gnu.org/licenses/gpl2.txt">http://www.gnu.org/licenses/gpl2.txt</a>&gt;<br>
<font color="#0000ff">----------------------------------------------------------------------------</font><br>
HenPlus II connecting&nbsp;<br>
&nbsp;url&nbsp;<font color="#ff00ff">'jdbc:odbc:sqlrtest'</font><br>
&nbsp;driver version&nbsp;<font color="#ff00ff">2.1</font><br>
&nbsp;oracle8 - Oracle Database 11g Enterprise Edition Release&nbsp;<font color="#ff00ff">11.2</font>.<font color="#ff00ff">0.1</font>.<font color="#ff00ff">0</font>&nbsp;- Production<br>
<font color="#6a5acd">With</font>&nbsp;the Partitioning, OLAP, Data Mining&nbsp;<font color="#a52a2a"><b>and</b></font>&nbsp;Real Application Testing options<br>
@odbc&gt;&nbsp;<font color="#a52a2a"><b>create</b></font>&nbsp;<font color="#6a5acd">table</font>&nbsp;testtable (col1 int, col2&nbsp;<font color="#2e8b57"><b>varchar2</b></font>(<font color="#ff00ff">20</font>));<br>
affected&nbsp;<font color="#ff00ff">0</font>&nbsp;<font color="#6a5acd">rows</font>&nbsp;(<font color="#ff00ff">301</font>&nbsp;msec)<br>
@odbc&gt;&nbsp;<font color="#a52a2a"><b>insert</b></font>&nbsp;<font color="#6a5acd">into</font>&nbsp;testtable&nbsp;<font color="#6a5acd">values</font>&nbsp;(<font color="#ff00ff">1</font>,<font color="#ff00ff">'hello'</font>);<br>
affected&nbsp;<font color="#ff00ff">1</font>&nbsp;<font color="#6a5acd">rows</font>&nbsp;(<font color="#ff00ff">71</font>&nbsp;msec)<br>
@odbc&gt;&nbsp;<font color="#a52a2a"><b>insert</b></font>&nbsp;<font color="#6a5acd">into</font>&nbsp;testtable&nbsp;<font color="#6a5acd">values</font>&nbsp;(<font color="#ff00ff">2</font>,<font color="#ff00ff">'goodbye'</font>);<br>
affected&nbsp;<font color="#ff00ff">1</font>&nbsp;<font color="#6a5acd">rows</font>&nbsp;(<font color="#ff00ff">1</font>&nbsp;msec)<br>
@odbc&gt;&nbsp;<font color="#a52a2a"><b>select</b></font>&nbsp;*&nbsp;<font color="#6a5acd">from</font>&nbsp;testtable;<br>
<font color="#0000ff">------+---------+</font><br>
&nbsp;COL1 |&nbsp;&nbsp;COL2&nbsp;&nbsp; |<br>
<font color="#0000ff">------+---------+</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ff00ff">1</font>&nbsp;| hello&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ff00ff">2</font>&nbsp;| goodbye |<br>
<font color="#0000ff">------+---------+</font><br>
<font color="#ff00ff">2</font>&nbsp;<font color="#6a5acd">rows</font>&nbsp;<font color="#a52a2a"><b>in</b></font>&nbsp;result (first&nbsp;<font color="#6a5acd">row</font>:&nbsp;<font color="#ff00ff">56</font>&nbsp;msec; total:&nbsp;<font color="#ff00ff">57</font>&nbsp;msec)<br>
@odbc&gt;&nbsp;<font color="#a52a2a"><b>update</b></font>&nbsp;testtable&nbsp;<font color="#a52a2a"><b>set</b></font>&nbsp;col2=<font color="#ff00ff">'bye'</font>&nbsp;<font color="#6a5acd">where</font>&nbsp;col1=<font color="#ff00ff">2</font>;<br>
affected&nbsp;<font color="#ff00ff">1</font>&nbsp;<font color="#6a5acd">rows</font>&nbsp;(<font color="#ff00ff">2</font>&nbsp;msec)<br>
@odbc&gt;&nbsp;<font color="#a52a2a"><b>select</b></font>&nbsp;*&nbsp;<font color="#6a5acd">from</font>&nbsp;testtable;<br>
<font color="#0000ff">------+-------+</font><br>
&nbsp;COL1 | COL2&nbsp;&nbsp;|<br>
<font color="#0000ff">------+-------+</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ff00ff">1</font>&nbsp;| hello |<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ff00ff">2</font>&nbsp;| bye&nbsp;&nbsp; |<br>
<font color="#0000ff">------+-------+</font><br>
<font color="#ff00ff">2</font>&nbsp;<font color="#6a5acd">rows</font>&nbsp;<font color="#a52a2a"><b>in</b></font>&nbsp;result (first&nbsp;<font color="#6a5acd">row</font>:&nbsp;<font color="#ff00ff">1</font>&nbsp;msec; total:&nbsp;<font color="#ff00ff">2</font>&nbsp;msec)<br>
@odbc&gt;&nbsp;<font color="#a52a2a"><b>delete</b></font>&nbsp;<font color="#6a5acd">from</font>&nbsp;testtable&nbsp;<font color="#6a5acd">where</font>&nbsp;col1=<font color="#ff00ff">1</font>;<br>
affected&nbsp;<font color="#ff00ff">1</font>&nbsp;<font color="#6a5acd">rows</font>&nbsp;(<font color="#ff00ff">2</font>&nbsp;msec)<br>
@odbc&gt;&nbsp;<font color="#a52a2a"><b>select</b></font>&nbsp;*&nbsp;<font color="#6a5acd">from</font>&nbsp;testtable;<br>
<font color="#0000ff">------+------+</font><br>
&nbsp;COL1 | COL2 |<br>
<font color="#0000ff">------+------+</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ff00ff">2</font>&nbsp;| bye&nbsp;&nbsp;|<br>
<font color="#0000ff">------+------+</font><br>
<font color="#ff00ff">1</font>&nbsp;<font color="#6a5acd">row</font>&nbsp;<font color="#a52a2a"><b>in</b></font>&nbsp;result (first&nbsp;<font color="#6a5acd">row</font>:&nbsp;<font color="#ff00ff">1</font>&nbsp;msec; total:&nbsp;<font color="#ff00ff">1</font>&nbsp;msec)<br>
@odbc&gt;&nbsp;<font color="#a52a2a"><b>drop</b></font>&nbsp;<font color="#6a5acd">table</font>&nbsp;testtable;<br>
affected&nbsp;<font color="#ff00ff">0</font>&nbsp;<font color="#6a5acd">rows</font>&nbsp;(<font color="#ff00ff">3</font>.<font color="#ff00ff">637</font>&nbsp;sec)<br>
@odbc&gt; quit<br>
storing settings..<br>
[dmuse@fedora bin]$<br>
</font>
</blockquote>

<p>Similarly, any program that uses JDBC can be configured to use SQL Relay via JDBC by setting its database url to jdbc:odbc:<i>DSN</i> where <i>DSN</i> is replaced with the ODBC DSN defined in /etc/odbc.ini.</p>

<p>Developing applications which use JDBC is beyond the scope if this document but many examples and tutorials may be found on the web.</p>

</body>
</html>
