#!/bin/sh

ID=`echo $1 | sed -e "s| ||g" 2> /dev/null`
KILLARGS=$2

prefix=@prefix@
PIDDIR=@localstatedir@/sqlrelay/tmp/pids

FILES="$PIDDIR/sqlr-*-$ID*"
if ( test -z "$ID" )
then
	FILES="$FILES $PIDDIR/sqlr-cachemanager*"
fi

for file in `ls $FILES 2> /dev/null`
do
	if ( test -r "$file" )
	then
		PID=`cat $file`
		echo "killing process $PID..."
		kill $KILLARGS $PID
		if ( test "$?" == "0" )
		then
			echo "   success"
		else
			echo "   failed"
		fi
	fi
done
