%package devel-c
Summary: Libraries and includes for developing with SQL Relay in C.
Requires: sqlrelay-devel-c++ = %{ver}
Group: Development/Libraries

%description devel-c
Libraries and includes for developing with SQL Relay in C.

%post devel-c
NEWLIBDIR=`echo "%{libdir}" | sed -e "s|\/|\\\\\/|g"`
NEWLDSOCONF=`sed -e "/^$NEWLIBDIR$/d" /etc/ld.so.conf`
echo "$NEWLDSOCONF" > /etc/ld.so.conf
echo %{libdir} >> /etc/ld.so.conf
/sbin/ldconfig

%postun devel-c
if ( test ! -d "%{libdir}" ); then
	NEWLIBDIR=`echo "%{libdir}" | sed -e "s|\/|\\\\\/|g"`
	NEWLDSOCONF=`sed -e "/^$NEWLIBDIR$/d" /etc/ld.so.conf`
	echo "$NEWLDSOCONF" > /etc/ld.so.conf
	/sbin/ldconfig
fi

%files devel-c
%defattr(-,root,root)
%{bindir}/sqlrclientwrapper-config
%{incdir}/sqlrelay/sqlrclientwrapper.h
%{libdir}/libsqlrclientwrapper.a
%{libdir}/libsqlrclientwrapper_p.a
%{libdir}/libsqlrclientwrapper.so
